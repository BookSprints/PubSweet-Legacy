(function(){var b=function(a){this._ice=a};b.prototype={keyDown:function(a){if(ice.dom.isBrowser("mozilla")){var d=parseInt(ice.dom.browser().version);if(14<d&&173===a.keyCode||14>=d&&109===a.keyCode)return this.convertEmdash(a)}else if(189===a.keyCode)return this.convertEmdash(a);return!0},convertEmdash:function(){var a=this._ice.getCurrentRange();if(a.collapsed){try{a.moveStart(ice.dom.CHARACTER_UNIT,-1);var d=ice.dom.getParents(a.startContainer,this._ice.blockEl)[0],b=ice.dom.getParents(a.endContainer,
this._ice.blockEl)[0];if(d===b&&!this._ice.getIceNode(a.startContainer,"deleteType")&&(c=a.toHtml(),"-"===c)){a.extractContents();a.collapse();var e=this._ice.env.document.createTextNode("—");this._ice.isTracking?this._ice._insertNode(e,a):(a.insertNode(e),a.setStart(e,1),a.collapse(!0));this._ice._preventKeyPress=!0;return!1}}catch(f){}a.collapse()}return!0}};ice.dom.noInclusionInherits(b,ice.IcePlugin);this._plugin.IceEmdashPlugin=b}).call(this.ice);